Настройка параметров автопилота
=================================

Параметры полета квадрокоптера в автоматическом режиме можно тонко настроить, используя программу :doc:`../../programming/pioneer_station/pioneer_station_main`. Для этого подключите "Пионер" к компьютеру следуя `инструкции`_ и перейдите из вкладки "редактор кода" в "настройки параметров автопилота" 

.. _инструкции: ../programming/pioneer_station/pioneer_station_upload.html

Для настройки "Пионер" должен быть подключен к компьютеру, его текущие параметры должны отображаться в правой части окна.

.. image:: /_static/images/autopilot.PNG
	:align: center

Перейдите во вкладку "параметры автопилота". В первом столбце таблицы приведены названия параметров. Узнать, за что каждый из них отвечает, можно, посмотрев в крайний правый столбец. Во втором столбце отображаются текущие значения, присвоенные каждому из параметров. Если вы хотите поменять какое-либо из них, введите новое значение в столбец справа от текущего значения и нажмите Enter. 
Завершив редактирование, не забудьте сохранить изменения, нажав кнопку **сохранить изменения на автопилот**. 

В верхней части окна также присутствуют кнопки **LPS**, **GPS** и **OPT**. Каждая из них загружает в квадрокоптер стандартный набор параметров для полета, соответственно, в локальной системе позиционирования, с использованием модуля GPS/ГЛОНАСС и модуля оптического позиционирования. 

.. note::
	Если вы хотите вернуться к заводским настройкам, нажмите кнопку **сбросить по умолчанию** над таблицей и подождите пока "Пионер" перезапустится.


Настройка параметров при замене двигателей
-----------------------------------------------

Если вы заменили двигатели на Пионере, они могут отличаться по электрическим характеристикам и не пройдут предстартовые проверки при подготовке к взлёту. За неё отвечают параметры:

* Copter_motorCheckTime - время проверки скорости оборотов двигателей на старте в секундах. Для отключения проверки установите значение параметра 0 
* Copter_startRpmMax - максимальное количество об/мин для проверки на старте
* Copter_startRpmMin - минимальное количество об/мин для проверки на старте
* Copter_startRpmSigma - максимальное расхождение между измеренными оборотами двигателей, при превышении которого считается, что двигатели работают неравномерно.

При получении команды на взлет (первые 5 секунд) проводится ещё одна проверка:

* Copter_stallRpm - предельная величина оборотов, после которой считается, что произошел срыв синхронизации, и двигатели отключаются. Для нестандартных двигателей можно использовать максимально возможные холостые обороты двигателя (для этого нужно умножить kv двигателя на напряжение аккумулятора)

В случае замены двигателей на более мощные вам также может понадобиться настроить PID коэффициенты. Неправильные PID  - причина заметных вибраций и колебаний коптера в полёте. 

Чтобы настроить PID коэффициенты, используйте следующие параметры:

* Copter_xyRate_ki интегральная часть регулятора. Его нужно уменьшить, если квадрокоптер нехотя отзывается на управление, и увеличить, если заметны низкочастотные колебания.
* Copter_xyRate_kp пропорциональная часть регулятора. Его можно уменьшить, если присутствует заметное перерегулирование и высокочастотные колебания (коптер дрожит во время зависания в одной точке). Если квадрокоптер плохо отзывается на управление, значение параметра нужно увеличить. 





.. note:: Для оценки допустимых оборотов запишите логи полёта в ручном режиме управления
